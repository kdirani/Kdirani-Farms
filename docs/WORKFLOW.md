# ุณูุฑ ุงูุนูู - ูุธุงู ุงูุชูุจููุงุช ุงูุฏูุงุฆูุฉ ๐

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงููุณุชูุฏ ูุดุฑุญ **ููู ูุนูู ุงููุธุงู** ูู ุงูุจุฏุงูุฉ ุฅูู ุงูููุงูุฉุ ุฎุทูุฉ ุจุฎุทูุฉ.

---

## ๐ฌ ุงููุฑุงุญู ุงูุฃุณุงุณูุฉ

```
1. ุฅูุดุงุก ุงููุฒุฑุนุฉ ูุงููุทูุน
         โ
2. ุฅุถุงูุฉ ุชุงุฑูุฎ ูููุงุฏ ุงููุฑุงุฎ
         โ
3. ุฅูุดุงุก ุงูุชูุจููุงุช ุชููุงุฆูุงู (Trigger)
         โ
4. ุนุฑุถ ุงูุชูุจููุงุช ูููุฒุงุฑุน
         โ
5. ุชูููุฐ ุงูุชูุจูู (ุฅุนุทุงุก ุงูุฏูุงุก)
         โ
6. ุชุชุจุน ุงูุญุงูุฉ ูุงูุฅุญุตุงุฆูุงุช
```

---

## ๐ ุงููุฑุญูุฉ 1: ุฅูุดุงุก ุงููุฒุฑุนุฉ ูุงููุทูุน

### ุงูุณููุงุฑูู
ุงููุฏูุฑ ูุฑูุฏ ุฅูุดุงุก ูุฒุฑุนุฉ ุฌุฏูุฏุฉ ููุฒุงุฑุน.

### ุงูุฎุทูุงุช

#### ุฃ. ุฅูุดุงุก ุงููุณุชุฎุฏู (ุงููุฒุงุฑุน)
```sql
-- ูู Supabase Auth
INSERT INTO auth.users (email, ...)
VALUES ('farmer@example.com', ...);

-- ุชููุงุฆูุงู ูุชู ุฅูุดุงุก profile
INSERT INTO public.profiles (id, fname, user_role)
VALUES (user_id, 'ุฃุญูุฏ ุงููุฒุงุฑุน', 'farmer');
```

#### ุจ. ุฅูุดุงุก ุงููุฒุฑุนุฉ
```sql
INSERT INTO public.farms (user_id, name, location, is_active)
VALUES (
  'user-uuid',
  'ูุฒุฑุนุฉ ุงููุงุฏู',
  'ุงููุฏูุฑุงูู',
  TRUE
)
RETURNING id; -- farm_id
```

#### ุฌ. ุฅูุดุงุก ุงููุณุชูุฏุน
```sql
INSERT INTO public.warehouses (farm_id, name)
VALUES ('farm-uuid', 'ุงููุณุชูุฏุน ุงูุฑุฆูุณู')
RETURNING id; -- warehouse_id
```

#### ุฏ. ุฅูุดุงุก ุงููุทูุน
```sql
INSERT INTO public.poultry_status (
  farm_id,
  batch_name,
  opening_chicks,
  remaining_chicks
)
VALUES (
  'farm-uuid',
  'ูุทูุน 2025-01',
  5000,  -- ุนุฏุฏ ุงููุฑุงุฎ ุงูุงุจุชุฏุงุฆู
  5000   -- ุงููุชุจูู = ุงูุงุจุชุฏุงุฆู ูู ุงูุจุฏุงูุฉ
)
RETURNING id; -- poultry_status_id
```

### โ ุงููุชูุฌุฉ
- โ ูุณุชุฎุฏู ุฌุฏูุฏ (ูุฒุงุฑุน)
- โ ูุฒุฑุนุฉ ุฌุฏูุฏุฉ
- โ ูุณุชูุฏุน
- โ ูุทูุน

**โ ููู**: ูู ูุฐู ุงููุฑุญูุฉุ **ูุง ุชูุฌุฏ ุชูุจููุงุช ุจุนุฏ** ูุฃููุง ูู ูุถู ุชุงุฑูุฎ ูููุงุฏ ุงููุฑุงุฎ!

---

## ๐ ุงููุฑุญูุฉ 2: ุฅุถุงูุฉ ุชุงุฑูุฎ ูููุงุฏ ุงููุฑุงุฎ

### ุงูุณููุงุฑูู
ุงููุฒุงุฑุน ุงุณุชูู ุงููุฑุงุฎ ุงูููู (2025-10-10) ููุฑูุฏ ุฅุถุงูุฉ ุชุงุฑูุฎ ุงููููุงุฏ.

### ุงูุฎุทูุงุช

#### ุงูุทุฑููุฉ ุงูุฃููู: ุนูุฏ ุงูุฅูุดุงุก
```typescript
// ูู complete-farm-setup-form.tsx
const formData = {
  // ...
  poultry: {
    batch_name: 'ูุทูุน 2025-01',
    opening_chicks: 5000,
    chick_birth_date: '2025-10-10', // โ ููุง!
  }
};
```

#### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุงูุชุญุฏูุซ ูุงุญูุงู
```sql
UPDATE public.poultry_status
SET chick_birth_date = '2025-10-10'
WHERE id = 'poultry-uuid';
```

### ๐ฅ ูุงุฐุง ูุญุฏุซ ุงูุขูุ

ุนูุฏ ุญูุธ `chick_birth_date`ุ ูุชู ุชุดุบูู **Trigger ุชููุงุฆูุงู**:

```sql
-- Trigger: trg_auto_create_medication_alerts
-- ุนูู ุฌุฏูู: poultry_status
-- ุนูุฏ: INSERT ุฃู UPDATE ููุญูู chick_birth_date

BEGIN
  -- ุงุณุชุฏุนุงุก ุฏุงูุฉ ุฅูุดุงุก ุงูุชูุจููุงุช
  PERFORM create_medication_alerts_for_poultry(
    NEW.id,                    -- ูุนุฑู ุงููุทูุน
    NEW.chick_birth_date       -- ุชุงุฑูุฎ ุงููููุงุฏ
  );
END;
```

---

## โก ุงููุฑุญูุฉ 3: ุฅูุดุงุก ุงูุชูุจููุงุช ุชููุงุฆูุงู

### ููู ุชุนูู ุฏุงูุฉ `create_medication_alerts_for_poultry()`ุ

#### ุงูุฎุทูุฉ 1: ุฌูุจ ุฌููุน ุงูุฃุฏููุฉ
```sql
SELECT id, name, day_of_age
FROM public.medicines
WHERE day_of_age IS NOT NULL;

-- ุงููุชูุฌุฉ:
-- id   | name                    | day_of_age
-- -----+-------------------------+------------
-- uuid | ูุถุงุฏ ุญููู               | 1+2+3
-- uuid | ุจุฑุงููุฑ (ูุทุฑุฉ)          | 4
-- uuid | ูููู + ุฒูุชู            | 6
-- uuid | ุฌุงูุจูุฑู                 | 10
-- uuid | ุจุฑููุดูุช                | 14
-- ...
```

#### ุงูุฎุทูุฉ 2: ุชุญููู ุฃูุงู ูู ุฏูุงุก

**ูุซุงู 1**: ุฏูุงุก "ูุถุงุฏ ุญููู" - ุฃูุงู: `"1+2+3"`

```sql
-- ุฏุงูุฉ parse_medicine_days('1+2+3')
-- ุชูุฑุฌุน: [1, 2, 3]

-- ูุชู ุฅูุดุงุก 3 ุชูุจููุงุช:
-- ุชูุจูู 1: ุงูููู 1
-- ุชูุจูู 2: ุงูููู 2
-- ุชูุจูู 3: ุงูููู 3
```

**ูุซุงู 2**: ุฏูุงุก "ุจุฑุงููุฑ" - ุฃูุงู: `"4"`

```sql
-- ุฏุงูุฉ parse_medicine_days('4')
-- ุชูุฑุฌุน: [4]

-- ูุชู ุฅูุดุงุก ุชูุจูู ูุงุญุฏ:
-- ุชูุจูู 1: ุงูููู 4
```

#### ุงูุฎุทูุฉ 3: ุญุณุงุจ ุงูุชูุงุฑูุฎ

ููู ููู ูู ุฃูุงู ุงูุฏูุงุก:

```sql
-- ุชุงุฑูุฎ ุงููููุงุฏ: 2025-10-10
-- ุงูููู ุงููุฌุฏูู: 1

scheduled_date = chick_birth_date + scheduled_day
scheduled_date = 2025-10-10 + 1
scheduled_date = 2025-10-11

-- ุชุงุฑูุฎ ุงูุชูุจูู (ูุจู ููู ูุงุญุฏ):
alert_date = scheduled_date - 1
alert_date = 2025-10-11 - 1
alert_date = 2025-10-10

-- ุฅูุง ุฅุฐุง ูุงู scheduled_day <= 1:
IF scheduled_day <= 1 THEN
  alert_date = scheduled_date  -- ููุณ ุงูููู
END IF
```

#### ุงูุฎุทูุฉ 4: ุฅุฏุฑุงุฌ ุงูุชูุจูู

```sql
INSERT INTO public.medication_alerts (
  farm_id,              -- ูุนุฑู ุงููุฒุฑุนุฉ
  poultry_status_id,    -- ูุนุฑู ุงููุทูุน
  medicine_id,          -- ูุนุฑู ุงูุฏูุงุก
  scheduled_day,        -- ุงูููู (1, 2, 3, ...)
  scheduled_date,       -- ุงูุชุงุฑูุฎ ุงููุญุณูุจ
  alert_date,           -- ุชุงุฑูุฎ ุงูุชูุจูู
  is_administered,      -- FALSE (ูู ูุชู ุจุนุฏ)
  created_at            -- ุงูุขู
)
VALUES (
  'farm-uuid',
  'poultry-uuid',
  'medicine-uuid',
  1,                    -- ุงูููู ุงูุฃูู
  '2025-10-11',         -- ุงูุบุฏ
  '2025-10-10',         -- ุงูููู
  FALSE,
  NOW()
);
```

### ๐ ูุซุงู ูุงูู

**ูุนุทูุงุช**:
- ุชุงุฑูุฎ ุงููููุงุฏ: `2025-10-10`
- ุฏูุงุก: "ูุถุงุฏ ุญููู" - ุฃูุงู: `"1+2+3"`

**ุงููุชูุฌุฉ**: 3 ุชูุจููุงุช

| scheduled_day | scheduled_date | alert_date | is_administered |
|---------------|----------------|------------|-----------------|
| 1 | 2025-10-11 | 2025-10-10 | FALSE |
| 2 | 2025-10-12 | 2025-10-11 | FALSE |
| 3 | 2025-10-13 | 2025-10-12 | FALSE |

### โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุจุนุฏ ุชุดุบูู ุงูุฏุงูุฉุ ูุชู ุฅูุดุงุก **ุฌููุน ุงูุชูุจููุงุช** ูุฌููุน ุงูุฃุฏููุฉ:

```sql
SELECT COUNT(*) FROM medication_alerts
WHERE poultry_status_id = 'poultry-uuid';

-- ุงููุชูุฌุฉ: 40-50 ุชูุจูู (ุญุณุจ ุนุฏุฏ ุงูุฃุฏููุฉ ูุฃูุงููุง)
```

---

## ๐ ุงููุฑุญูุฉ 4: ุนุฑุถ ุงูุชูุจููุงุช ูููุฒุงุฑุน

### ุงูุณููุงุฑูู
ุงููุฒุงุฑุน ูุฏุฎู ุฅูู ููุญุฉ ุงูุชุญูู ููุฑูุฏ ุฑุคูุฉ ุงูุชูุจููุงุช.

### ุฃ. ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (`farmer/page.tsx`)

```typescript
// ุฌูุจ ุงูุชูุจููุงุช ุงููุงุฏูุฉ (ุขุฎุฑ 10)
const alertsResult = await getUpcomingAlertsForUser(
  session.user.id,  // ูุนุฑู ุงููุฒุงุฑุน
  10                // ุนุฏุฏ ุงูุชูุจููุงุช
);

const alerts = alertsResult.data; // ุงููุตูููุฉ
```

### ุจ. ููู ุชุนูู ุฏุงูุฉ `get_upcoming_alerts()`ุ

```sql
SELECT 
  ma.id AS alert_id,
  f.name AS farm_name,
  m.name AS medicine_name,
  ma.scheduled_date,
  (ma.scheduled_date - CURRENT_DATE) AS days_until,
  
  -- ุญุณุงุจ ุงูุฃููููุฉ
  CASE 
    WHEN ma.scheduled_date < CURRENT_DATE THEN 'ูุชุฃุฎุฑ'
    WHEN ma.scheduled_date = CURRENT_DATE THEN 'ุงูููู'
    WHEN ma.scheduled_date = CURRENT_DATE + 1 THEN 'ุบุฏุงู'
    ELSE 'ูุงุฏู'
  END AS priority,
  
  -- ูุณุชูู ุงูุงุณุชุนุฌุงู (ููุชุฑุชูุจ)
  CASE 
    WHEN ma.scheduled_date < CURRENT_DATE THEN 1      -- ุงูุฃูู
    WHEN ma.scheduled_date = CURRENT_DATE THEN 2
    WHEN ma.scheduled_date = CURRENT_DATE + 1 THEN 3
    ELSE 4
  END AS urgency_level

FROM medication_alerts ma
INNER JOIN farms f ON ma.farm_id = f.id
INNER JOIN medicines m ON ma.medicine_id = m.id

WHERE f.user_id = 'user-uuid'           -- ููุท ูุฒุงุฑุน ูุฐุง ุงููุฒุงุฑุน
  AND NOT ma.is_administered            -- ููุท ุบูุฑ ุงููููุฐุฉ
  AND ma.scheduled_date >= CURRENT_DATE - 7  -- ุขุฎุฑ 7 ุฃูุงู (ูููุชุฃุฎุฑุฉ)

ORDER BY urgency_level ASC, ma.scheduled_date ASC
LIMIT 10;
```

### ุฌ. ูุซุงู ุงููุชูุฌุฉ

**ุงูููู**: 2025-10-12

| medicine_name | scheduled_date | priority | days_until |
|---------------|----------------|----------|------------|
| ุจุฑุงููุฑ | 2025-10-10 | ูุชุฃุฎุฑ | -2 |
| ูููู | 2025-10-11 | ูุชุฃุฎุฑ | -1 |
| ูุถุงุฏ ุญููู | 2025-10-12 | ุงูููู | 0 |
| ููุชุงูููุงุช | 2025-10-13 | ุบุฏุงู | 1 |
| ุฌุงูุจูุฑู | 2025-10-15 | ูุงุฏู | 3 |

### ุฏ. ุงูุนุฑุถ ูู ุงููุงุฌูุฉ

```tsx
{alerts.map((alert) => (
  <div className={`alert ${
    alert.priority === 'ูุชุฃุฎุฑ' ? 'bg-red-50 border-red-500' :
    alert.priority === 'ุงูููู' ? 'bg-orange-50 border-orange-500' :
    alert.priority === 'ุบุฏุงู' ? 'bg-yellow-50 border-yellow-500' :
    'bg-blue-50 border-blue-500'
  }`}>
    {/* ุงูุฃููููุฉ */}
    <Badge variant={
      alert.priority === 'ูุชุฃุฎุฑ' ? 'destructive' :
      alert.priority === 'ุงูููู' ? 'warning' : 'default'
    }>
      {alert.priority}
    </Badge>
    
    {/* ุงุณู ุงูุฏูุงุก */}
    <h4>๐ {alert.medicine_name}</h4>
    
    {/* ุงูุชุงุฑูุฎ */}
    <p>๐ {alert.scheduled_date}</p>
    
    {/* ุฒุฑ ุงูุฅุฌุฑุงุก */}
    <Button onClick={() => markAsAdministered(alert.alert_id)}>
      ุชู ุงูุฅุนุทุงุก โ
    </Button>
  </div>
))}
```

---

## โ ุงููุฑุญูุฉ 5: ุชูููุฐ ุงูุชูุจูู (ุฅุนุทุงุก ุงูุฏูุงุก)

### ุงูุณููุงุฑูู
ุงููุฒุงุฑุน ุฃุนุทู ุงูุฏูุงุก ููุฑูุฏ ุชุญุฏูุฏ ุงูุชูุจูู ูู "ุชู".

### ุฃ. ูู ุงููุงุฌูุฉ

```tsx
import { markAlertAsAdministered } from '@/actions/medication-alerts.actions';

const handleMarkComplete = async (alertId: string) => {
  const result = await markAlertAsAdministered(
    alertId,
    'ุชู ุฅุนุทุงุก ุงูุฏูุงุก ูู ุงูููุนุฏ ุงููุญุฏุฏ' // ููุงุญุธุงุช ุงุฎุชูุงุฑูุฉ
  );
  
  if (result.success) {
    toast.success('ุชู ุชุญุฏูุซ ุญุงูุฉ ุงูุชูุจูู');
    // ุฅุนุงุฏุฉ ุชุญููู ุงูุชูุจููุงุช
  }
};
```

### ุจ. ูู Server Action

```typescript
// actions/medication-alerts.actions.ts
export async function markAlertAsAdministered(
  alertId: string,
  notes?: string
) {
  const supabase = await createClient();
  
  // ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  const { data, error } = await supabase.rpc(
    'mark_alert_as_administered',
    {
      p_alert_id: alertId,
      p_notes: notes || null
    }
  );
  
  if (data) {
    revalidatePath('/farmer'); // ุชุญุฏูุซ ุงูุตูุญุฉ
    return { success: true };
  }
  
  return { success: false, error: 'ูุดู ุงูุชุญุฏูุซ' };
}
```

### ุฌ. ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

```sql
-- ุฏุงูุฉ: mark_alert_as_administered()

UPDATE medication_alerts
SET 
  is_administered = TRUE,           -- ุชู ุงูุฅุนุทุงุก
  administered_at = NOW(),          -- ุชูููุช ุงูุฅุนุทุงุก
  notes = COALESCE(p_notes, notes), -- ุงูููุงุญุธุงุช (ุฅู ูุฌุฏุช)
  updated_at = NOW()                -- ุขุฎุฑ ุชุญุฏูุซ
WHERE id = p_alert_id
  AND NOT is_administered;          -- ููุท ุฅุฐุง ูู ูุชู ุชุญุฏูุซู ูุณุจูุงู

-- ุฅุฑุฌุงุน: TRUE ุฅุฐุง ูุฌุญุ FALSE ุฅุฐุง ูุดู
RETURN ROW_COUNT > 0;
```

### โ ุงููุชูุฌุฉ

**ูุจู**:
```sql
id: uuid-123
medicine_id: med-uuid
scheduled_date: 2025-10-12
is_administered: FALSE
administered_at: NULL
notes: NULL
```

**ุจุนุฏ**:
```sql
id: uuid-123
medicine_id: med-uuid
scheduled_date: 2025-10-12
is_administered: TRUE         โ ุชุบูุฑ
administered_at: 2025-10-12 14:30:00  โ ุชุบูุฑ
notes: 'ุชู ุฅุนุทุงุก ุงูุฏูุงุก...'  โ ุชุบูุฑ
updated_at: 2025-10-12 14:30:00  โ ุชุบูุฑ
```

---

## ๐ ุงููุฑุญูุฉ 6: ุชุชุจุน ุงูุญุงูุฉ ูุงูุฅุญุตุงุฆูุงุช

### ุฃ. ุฅุญุตุงุฆูุงุช ุงููุฒุฑุนุฉ

```typescript
const stats = await getFarmAlertStats('farm-uuid');

// ุงููุชูุฌุฉ:
{
  total: 45,        // ุฅุฌูุงูู ุงูุชูุจููุงุช
  completed: 12,    // ุงูููุชููุฉ
  pending: 33,      // ุงููุนููุฉ
  overdue: 3,       // ุงููุชุฃุฎุฑุฉ
  today: 2,         // ุงูููู
  tomorrow: 1       // ุบุฏุงู
}
```

### ุจ. ููุฎุต ุฌููุน ุงููุฒุงุฑุน (ูููุฏุฑุงุก)

```sql
SELECT * FROM v_medication_alerts_summary;
```

| farm_name | current_chick_age | total_alerts | completed | overdue | today |
|-----------|-------------------|--------------|-----------|---------|-------|
| ูุฒุฑุนุฉ ุงููุงุฏู | 15 ููู | 45 | 12 | 3 | 2 |
| ูุฒุฑุนุฉ ุงูููุฑ | 30 ููู | 48 | 25 | 0 | 1 |

### ุฌ. ุงูุชูุจููุงุช ุงููุดุทุฉ ุจุงูุชูุตูู

```typescript
const alerts = await getActiveAlertsForFarm('farm-uuid', 7);

// ุงููุชูุฌุฉ:
[
  {
    medicine_name: 'ูุถุงุฏ ุญููู',
    scheduled_day: 1,
    scheduled_date: '2025-10-11',
    days_until_scheduled: -1,
    is_overdue: true,
    priority: 'ุนุงุฌู - ูุชุฃุฎุฑ'
  },
  {
    medicine_name: 'ููุชุงูููุงุช',
    scheduled_day: 2,
    scheduled_date: '2025-10-12',
    days_until_scheduled: 0,
    is_overdue: false,
    priority: 'ุนุงุฌู - ุงูููู'
  },
  // ...
]
```

---

## ๐ ุงูุณููุงุฑูููุงุช ุงูุฎุงุตุฉ

### ๐ ุงูุณููุงุฑูู 1: ุชุบููุฑ ุชุงุฑูุฎ ุงููููุงุฏ

**ุงูุญุงูุฉ**: ุงููุฒุงุฑุน ุฃุฏุฎู ุชุงุฑูุฎ ุฎุงุทุฆ ููุฑูุฏ ุชุตุญูุญู.

```sql
-- ุชุญุฏูุซ ุงูุชุงุฑูุฎ
UPDATE poultry_status
SET chick_birth_date = '2025-10-01'  -- ุงูุชุงุฑูุฎ ุงูุฌุฏูุฏ
WHERE id = 'poultry-uuid';

-- ูุงุฐุง ูุญุฏุซุ
-- 1. ูุชู ุชุดุบูู Trigger
-- 2. ูุชู ุญุฐู ุฌููุน ุงูุชูุจููุงุช ุงููุฏููุฉ
-- 3. ูุชู ุฅูุดุงุก ุชูุจููุงุช ุฌุฏูุฏุฉ ุจูุงุกู ุนูู ุงูุชุงุฑูุฎ ุงูุฌุฏูุฏ
```

### ๐ ุงูุณููุงุฑูู 2: ุฅุถุงูุฉ ุฏูุงุก ุฌุฏูุฏ

**ุงูุญุงูุฉ**: ุงููุฏูุฑ ุฃุถุงู ุฏูุงุก ุฌุฏูุฏ ูู ุฌุฏูู `medicines`.

```sql
-- ุฅุถุงูุฉ ุฏูุงุก ุฌุฏูุฏ
INSERT INTO medicines (name, description, day_of_age)
VALUES ('ุฏูุงุก ุฌุฏูุฏ', 'ูุตู', '5+10+15');

-- ูุงุฐุง ูุญุฏุซุ
-- โ ูุง ุดูุก! ุงูุชูุจููุงุช ุงูููุฌูุฏุฉ ูุง ุชุชุฃุซุฑ.

-- ุงูุญู: ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุชูุจููุงุช ูุฏููุงู
SELECT create_medication_alerts_for_poultry(
  'poultry-uuid',
  (SELECT chick_birth_date FROM poultry_status WHERE id = 'poultry-uuid')
);
```

### ๐ ุงูุณููุงุฑูู 3: ุฅูุบุงุก ุชุญุฏูุฏ ุงูุชูุจูู (ุฎุทุฃ)

**ุงูุญุงูุฉ**: ุงููุฒุงุฑุน ุญุฏุฏ ุงูุชูุจูู ุจุงูุฎุทุฃ.

```typescript
const result = await unmarkAlertAsAdministered('alert-uuid');

// ูุงุฐุง ูุญุฏุซุ
// 1. is_administered = FALSE
// 2. administered_at = NULL
// 3. ุงูุชูุจูู ูุธูุฑ ูุฑุฉ ุฃุฎุฑู ูู ุงููุงุฆูุฉ
```

---

## ๐ ูุฎุทุท ุชุฏูู ุงูุจูุงูุงุช

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    1. ุฅูุดุงุก ุงููุทูุน                          โ
โ  โโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโ                    โ
โ  โ   ุงููุฏูุฑ   โ โโโโโโ โ poultry_statusโ                    โ
โ  โโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโ                    โ
โ                              โ                               โ
โ                              โ (ุจุฏูู chick_birth_date)       โ
โ                              โ                               โ
โ                         โ ูุง ุชูุฌุฏ ุชูุจููุงุช                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              2. ุฅุถุงูุฉ ุชุงุฑูุฎ ุงููููุงุฏ                         โ
โ  โโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโ                    โ
โ  โ   ุงููุฒุงุฑุน  โ โโโโโโ โ    UPDATE     โ                    โ
โ  โโโโโโโโโโโโโโ         โchick_birth_dateโ                   โ
โ                         โโโโโโโโโโโโโโโโ                    โ
โ                              โ                               โ
โ                              โ                               โ
โ                      โก Trigger ูุนูู                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              3. ุฅูุดุงุก ุงูุชูุจููุงุช ุชููุงุฆูุงู                    โ
โ                                                               โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ            โ
โ  โ create_medication_alerts_for_poultry()      โ            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ            โ
โ         โ                                                     โ
โ         โโโโ ุฌูุจ ุงูุฃุฏููุฉ ูู medicines                       โ
โ         โโโโ ุชุญููู ุฃูุงู ูู ุฏูุงุก (parse_medicine_days)      โ
โ         โโโโ ุญุณุงุจ scheduled_date ู alert_date               โ
โ         โโโโ ุฅุฏุฑุงุฌ ูู medication_alerts                     โ
โ                                                               โ
โ  โ ุชู ุฅูุดุงุก 40-50 ุชูุจูู                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  4. ุนุฑุถ ุงูุชูุจููุงุช                           โ
โ  โโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโ                    โ
โ  โ   ุงููุฒุงุฑุน  โ โโโโโโ โ farmer/page  โ                    โ
โ  โโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโ                    โ
โ                              โ                               โ
โ                              โ                               โ
โ                   get_upcoming_alerts()                      โ
โ                              โ                               โ
โ                              โ                               โ
โ         โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                  โ
โ         โ  ๐จ ูุชุฃุฎุฑ  โ  โ๏ธ ุงูููู  โ  ๐ ุบุฏุงู โ               โ
โ         โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  5. ุชูููุฐ ุงูุชูุจูู                           โ
โ  โโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโ                    โ
โ  โ   ุงููุฒุงุฑุน  โ โโโโโโ โ [ุชู ุงูุฅุนุทุงุก โ] โ                   โ
โ  โโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโ                    โ
โ                              โ                               โ
โ                              โ                               โ
โ               mark_alert_as_administered()                   โ
โ                              โ                               โ
โ                              โ                               โ
โ                  โโโโโโโโโโโโโโโโโโโโโโโ                    โ
โ                  โ is_administered = TRUEโ                   โ
โ                  โ administered_at = NOW โ                   โ
โ                  โโโโโโโโโโโโโโโโโโโโโโโ                    โ
โ                                                               โ
โ  โ ุงูุชูุจูู ูุง ูุธูุฑ ูู ุงููุงุฆูุฉ ุจุนุฏ ุงูุขู                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ฏ ููุฎุต ุณูุฑ ุงูุนูู

### ุงููุฏุฎูุงุช
1. ุชุงุฑูุฎ ูููุงุฏ ุงููุฑุงุฎ (`chick_birth_date`)
2. ุฌุฏูู ุงูุฃุฏููุฉ (`medicines` ูุน `day_of_age`)

### ุงููุนุงูุฌุฉ (ุชููุงุฆูุฉ)
1. Trigger ูุชู ุชุดุบููู ุนูุฏ ุฅุถุงูุฉ/ุชุญุฏูุซ ุงูุชุงุฑูุฎ
2. ุงูุฏุงูุฉ ุชุฌูุจ ุฌููุน ุงูุฃุฏููุฉ
3. ุชุญููู ุฃูุงู ูู ุฏูุงุก
4. ุญุณุงุจ ุงูุชูุงุฑูุฎ ุงููุฌุฏููุฉ
5. ุฅูุดุงุก ุงูุชูุจููุงุช

### ุงููุฎุฑุฌุงุช
1. ุชูุจููุงุช ูุตููุฉ ุญุณุจ ุงูุฃููููุฉ
2. ุนุฑุถ ูู ููุญุฉ ุงูุชุญูู
3. ุฅููุงููุฉ ุงูุชุญุฏูุฏ ูู "ุชู"
4. ุฅุญุตุงุฆูุงุช ูุชูุงุฑูุฑ

### ุงูููุฒุงุช ุงูุชููุงุฆูุฉ
- โ ุฅูุดุงุก ุชููุงุฆู ููุชูุจููุงุช
- โ ุชุตููู ุชููุงุฆู ููุฃููููุฉ
- โ ุญุณุงุจ ุชููุงุฆู ููุชูุงุฑูุฎ
- โ ุชุญุฏูุซ ุชููุงุฆู ุนูุฏ ุชุบููุฑ ุงูุชุงุฑูุฎ

---

## ๐ ุฃุณุฆูุฉ ุดุงุฆุนุฉ

### ุณ: ูุชู ูุชู ุฅูุดุงุก ุงูุชูุจููุงุชุ
**ุฌ**: ุชููุงุฆูุงู ุนูุฏ ุฅุถุงูุฉ ุฃู ุชุญุฏูุซ `chick_birth_date` ูู ุฌุฏูู `poultry_status`.

### ุณ: ูุงุฐุง ูู ุบูุฑุช ุชุงุฑูุฎ ุงููููุงุฏุ
**ุฌ**: ูุชู ุญุฐู ุฌููุน ุงูุชูุจููุงุช ุงููุฏููุฉ ูุฅูุดุงุก ุชูุจููุงุช ุฌุฏูุฏุฉ ุจูุงุกู ุนูู ุงูุชุงุฑูุฎ ุงูุฌุฏูุฏ.

### ุณ: ูู ูููู ุฅุถุงูุฉ ุชูุจูู ูุฏููุงูุ
**ุฌ**: ูุง ููุตุญ ุจุฐูู. ุงูุฃูุถู ุฅุถุงูุฉ ุงูุฏูุงุก ูู ุฌุฏูู `medicines` ุซู ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุชูุจููุงุช.

### ุณ: ูุงุฐุง ูู ูุณูุช ุฅุนุทุงุก ุฏูุงุกุ
**ุฌ**: ุงูุชูุจูู ุณูุธูุฑ ูู "ูุชุฃุฎุฑ" (๐จ) ูุน ุนุฏุฏ ุงูุฃูุงู ุงููุชุฃุฎุฑุฉ.

### ุณ: ููู ุฃุนุฑู ุงูุชูุจููุงุช ุงูููุชููุฉุ
**ุฌ**: ุงุณุชุฎุฏู `getAllAlertsForFarm()` ูุน ููุชุฑ `is_administered = TRUE`.

---

**๐ ุงููุฑุฌุน ุงููุงูู**: ุฑุงุฌุน `MEDICATION_ALERTS_README.md` ููุชูุงุตูู ุงููููุฉ.
