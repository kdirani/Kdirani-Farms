# ุชุญุณูู ุฅุฏุงุฑุฉ ุงููุฎุฒูู ุจููุชุฑุฉ ุงูููุงุฏ ูุงูุฃุฏููุฉ

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุฅุถุงูุฉ ุฏุนู ูุงูู ููุชูููุฒ ุจูู ุงูููุงุฏ ุงูุบุฐุงุฆูุฉ ูุงูุฃุฏููุฉ ูู ูุธุงู ุฅุฏุงุฑุฉ ุงููุฎุฒููุ ูุน ุฅููุงููุฉ ุงูููุชุฑุฉ ูุฅุถุงูุฉ ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ ููููููุง.

## ุงูุชุบููุฑุงุช ุงููููุฐุฉ

### 1. ุชุญุฏูุซ ุฃููุงุน ุงูุจูุงูุงุช (Material Type)
**ุงูููู:** `actions/material.actions.ts`

- ุฅุถุงูุฉ ุญูู `medicine_id` ุฅูู ููุน `Material`
- ุชุญุฏูุซ `CreateMaterialInput` ูุฏุนู ุฅูุง `material_name_id` ุฃู `medicine_id`
- ุชุญุฏูุซ ุฏุงูุฉ `createMaterial` ููุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูุงูุชุนุงูู ูุน ููุง ุงูููุนูู

```typescript
export type Material = {
  // ... ุงูุญููู ุงูููุฌูุฏุฉ
  medicine_id: string | null;
  // ...
};

export type CreateMaterialInput = {
  warehouse_id: string;
  material_name_id?: string;
  medicine_id?: string;
  unit_id: string;
  opening_balance: number;
};
```

### 2. ุฅุถุงูุฉ ุงูููุชุฑุฉ ุญุณุจ ุงูููุน ูู ุตูุญุฉ ุงูููุงุฏ
**ุงูููู:** `components/admin/materials/materials-table.tsx`

- ุฅุถุงูุฉ ูุงุฆูุฉ ููุณุฏูุฉ ุฌุฏูุฏุฉ ูููุชุฑุฉ ุงูููุงุฏ ุญุณุจ ุงูููุน (ููุงุฏ ุบุฐุงุฆูุฉ / ุฃุฏููุฉ)
- ุชุญุฏูุซ ููุทู ุงูููุชุฑุฉ ูุฏุนู ุงูููุชุฑุฉ ุญุณุจ `material_name_id` ู `medicine_id`

**ุงูููุฒุงุช:**
- ููุชุฑ "ุงููู" - ูุนุฑุถ ุฌููุน ุงูุฃุตูุงู
- ููุชุฑ "ููุงุฏ ุบุฐุงุฆูุฉ" - ูุนุฑุถ ุงูููุงุฏ ุงูุบุฐุงุฆูุฉ ููุท
- ููุชุฑ "ุฃุฏููุฉ" - ูุนุฑุถ ุงูุฃุฏููุฉ ููุท

### 3. ุชุญุฏูุซ ูุงูุฐุฉ ุฅุถุงูุฉ ูุงุฏุฉ
**ุงูููู:** `components/admin/materials/create-material-dialog.tsx`

ุชู ุชุญุณูู ุงููุงูุฐุฉ ูุชุดูู:
- ุงุฎุชูุงุฑ ููุน ุงูุตูู (ูุงุฏุฉ ุบุฐุงุฆูุฉ ุฃู ุฏูุงุก) ุจุงุณุชุฎุฏุงู ุฃุฒุฑุงุฑ ุงูุฑุงุฏูู
- ุนุฑุถ ูุงุฆูุฉ ุงูููุงุฏ ุงูุบุฐุงุฆูุฉ ุฃู ุงูุฃุฏููุฉ ุญุณุจ ุงูุงุฎุชูุงุฑ
- ุชุญููู ูุงุฆูุฉ ุงูุฃุฏููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุญุฏูุซ ุฑุณุงุฆู ุงูุชุฃููุฏ ูุชุนูุณ ููุน ุงูุตูู ุงููุถุงู

**ุงููุงุฌูุฉ:**
```
ููุน ุงูุตูู: 
โ ูุงุฏุฉ ุบุฐุงุฆูุฉ   โ ุฏูุงุก

[ุญุณุจ ุงูุงุฎุชูุงุฑ]
- ุฅุฐุง ูุงูุช ูุงุฏุฉ ุบุฐุงุฆูุฉ: ูุงุฆูุฉ ุงูููุงุฏ
- ุฅุฐุง ูุงู ุฏูุงุก: ูุงุฆูุฉ ุงูุฃุฏููุฉ (ูุน ุฑูุฒ ๐)
```

### 4. ุฅุถุงูุฉ ูุณู ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ ููุฃุฏููุฉ
**ุงูููู:** `components/admin/setup/complete-farm-setup-form.tsx`

ุชู ุฅุถุงูุฉ ูุณู ุฌุฏูุฏ ูููุตู ููุฃุฏููุฉ ูู ุตูุญุฉ ุฅุนุฏุงุฏ ุงููุฒุฑุนุฉ:

- **ุงููุณู 5:** ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ ููููุงุฏ ุงูุบุฐุงุฆูุฉ (ุงุฎุชูุงุฑู)
- **ุงููุณู 6:** ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ ููุฃุฏููุฉ (ุงุฎุชูุงุฑู)

**ุงูููุฒุงุช:**
- ุชุญููู ูุงุฆูุฉ ุงูุฃุฏููุฉ ุชููุงุฆูุงู ุนูุฏ ูุชุญ ุงูุตูุญุฉ
- ุฅููุงููุฉ ุฅุถุงูุฉ ุนุฏุฉ ุฃุฏููุฉ ุจุฃุฑุตุฏุฉ ุงูุชุชุงุญูุฉ ูุฎุชููุฉ
- ูุงุฌูุฉ ูุดุงุจูุฉ ููููุงุฏ ุงูุบุฐุงุฆูุฉ ูุณูููุฉ ุงูุงุณุชุฎุฏุงู
- ุฑูุฒ ๐ ูุชูููุฒ ุงูุฃุฏููุฉ ุจุตุฑูุงู

### 5. ุชุญุฏูุซ ุฅุฌุฑุงุกุงุช ุฅุนุฏุงุฏ ุงููุฒุฑุนุฉ
**ุงูููู:** `actions/farm-setup.actions.ts`

ุชู ุชุญุฏูุซ ููุน `FarmSetupInput` ู `SetupResult` ูุฏุนู ุงูุฃุฏููุฉ:

```typescript
export type FarmSetupInput = {
  // ... ุงูุญููู ุงูููุฌูุฏุฉ
  medicines: Array<{
    medicine_id: string;
    unit_id: string;
    opening_balance: number;
  }>;
};

export type SetupResult = {
  // ... ุงูุญููู ุงูููุฌูุฏุฉ
  medicineIds?: string[];
};
```

**ุงูููุทู:**
- ุงูุฎุทูุฉ 6: ุฅูุดุงุก ุฃุฑุตุฏุฉ ุงูุชุชุงุญูุฉ ููุฃุฏููุฉ ูู ุงููุณุชูุฏุน
- ุงุณุชุฎุฏุงู ููุณ ุฌุฏูู `materials` ูุน `medicine_id` ุจุฏูุงู ูู `material_name_id`
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ูุฑุฏู - ุงูุงุณุชูุฑุงุฑ ุญุชู ูู ูุดู ุฅูุดุงุก ุจุนุถ ุงูุฃุฏููุฉ

### 6. ุชุญุฏูุซ ูุตู ุตูุญุฉ ุงูุฅุนุฏุงุฏ
**ุงูููู:** `app/(dashboard)/admin/setup/page.tsx`

ุชู ุชุญุฏูุซ:
- ุนููุงู ุงูุตูุญุฉ ููุดูู ุงูุฃุฏููุฉ
- ูุงุฆูุฉ ุฎุทูุงุช ุณูุฑ ุงูุนูู ูุชุดูู ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ ููุฃุฏููุฉ
- ูุตู metadata ููุตูุญุฉ

## ุขููุฉ ุงูุนูู

### ุฅุถุงูุฉ ูุงุฏุฉ ุบุฐุงุฆูุฉ
1. ุงููุณุชุฎุฏู ูุฎุชุงุฑ "ูุงุฏุฉ ุบุฐุงุฆูุฉ"
2. ูุธูุฑ ูุงุฆูุฉ ููุณุฏูุฉ ุจุงูููุงุฏ ุงูุบุฐุงุฆูุฉ
3. ูุชู ุงูุญูุธ ูุน `material_name_id`

### ุฅุถุงูุฉ ุฏูุงุก
1. ุงููุณุชุฎุฏู ูุฎุชุงุฑ "ุฏูุงุก"
2. ูุธูุฑ ูุงุฆูุฉ ููุณุฏูุฉ ุจุงูุฃุฏููุฉ (ูุน ุฑูุฒ ๐)
3. ูุชู ุงูุญูุธ ูุน `medicine_id`

### ุงูููุชุฑุฉ ูู ุตูุญุฉ ุงูููุงุฏ
- **ุงููู:** ูุนุฑุถ ุฌููุน ุงูุณุฌูุงุช
- **ููุงุฏ ุบุฐุงุฆูุฉ:** `material_name_id IS NOT NULL AND medicine_id IS NULL`
- **ุฃุฏููุฉ:** `medicine_id IS NOT NULL AND material_name_id IS NULL`

### ุฅุนุฏุงุฏ ูุฒุฑุนุฉ ุฌุฏูุฏุฉ
1. ุฅูุดุงุก ุงููุณุชุฎุฏู
2. ุฅูุดุงุก ุงููุฒุฑุนุฉ
3. ุฅูุดุงุก ุงููุณุชูุฏุน
4. ุฅูุดุงุก ุงููุทูุน
5. ุฅุถุงูุฉ ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ ููููุงุฏ ุงูุบุฐุงุฆูุฉ (ุงุฎุชูุงุฑู)
6. ุฅุถุงูุฉ ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ ููุฃุฏููุฉ (ุงุฎุชูุงุฑู)

## ูุงุนุฏุฉ ุงูุจูุงูุงุช

ูุณุชุฎุฏู ุงููุธุงู ุฌุฏูู `materials` ูุชุฎุฒูู ูู ูู ุงูููุงุฏ ุงูุบุฐุงุฆูุฉ ูุงูุฃุฏููุฉ:

```sql
CREATE TABLE public.materials (
  id uuid PRIMARY KEY,
  warehouse_id uuid REFERENCES warehouses(id),
  material_name_id uuid REFERENCES materials_names(id),
  medicine_id uuid REFERENCES medicines(id),
  -- ... ุจููุฉ ุงูุญููู
  CONSTRAINT check_material_or_medicine_in_stock 
  CHECK (
    (material_name_id IS NOT NULL AND medicine_id IS NULL) OR 
    (material_name_id IS NULL AND medicine_id IS NOT NULL)
  )
);
```

**ุงููููุฏ:**
- ูุฌุจ ุฃู ูุญุชูู ุงูุณุฌู ุนูู `material_name_id` ุฃู `medicine_id` ูููุณ ูููููุง
- ููุงุฑุณ ูุฑูุฏุฉ ูููุตูุฉ ููู ููุน ูุชุฌูุจ ุงูุชูุฑุงุฑ

## ุงูููุงุฆุฏ

1. **ุชูุธูู ุฃูุถู:** ูุตู ูุงุถุญ ุจูู ุงูููุงุฏ ุงูุบุฐุงุฆูุฉ ูุงูุฃุฏููุฉ
2. **ููุชุฑุฉ ุณููุฉ:** ุฅููุงููุฉ ุนุฑุถ ููุน ูุงุญุฏ ูู ุงููุฎุฒูู
3. **ุฅุนุฏุงุฏ ุดุงูู:** ุฅููุงููุฉ ุฅุถุงูุฉ ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ ููุฃุฏููุฉ ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏ
4. **ูุงุฌูุฉ ุจุฏูููุฉ:** ุฑููุฒ ูููุฒุฉ (๐) ููุฃุฏููุฉ
5. **ูุฑููุฉ:** ููุณ ุงูุจููุฉ ุงูุชุญุชูุฉ ูููุง ุงูููุนูู

## ุงูุตูุญุงุช ุงููุชุฃุซุฑุฉ

1. `/admin/materials` - ุตูุญุฉ ุนุฑุถ ุงููุฎุฒูู ูุน ููุชุฑุฉ ูุญุณููุฉ
2. `/admin/setup` - ุตูุญุฉ ุฅุนุฏุงุฏ ุงููุฒุฑุนุฉ ูุน ุฏุนู ุงูุฃุฏููุฉ
3. ูุงูุฐุฉ ุฅุถุงูุฉ ูุงุฏุฉ - ุฏุนู ุงุฎุชูุงุฑ ุงูููุน

## ุงูููุงุญุธุงุช ุงูุชูููุฉ

- ูุชู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุนูู ูุณุชูู ุงููููุฐุฌ ูุงูุฎุงุฏู
- ูุชู ุนุฑุถ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูู ุญุงูุฉ ุงููุญุงููุฉ ูุฅุถุงูุฉ ุตูู ููุฑุฑ
- ูุชู ุงุณุชุฎุฏุงู ููุณ ุฌุฏูู `materials` ูุชุจุณูุท ุฅุฏุงุฑุฉ ุงููุฎุฒูู
- ุงูุชูุงูู ุงููุงูู ูุน ูุธุงู ุงูููุงุชูุฑ ุงูููุฌูุฏ

## ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ ุงููุญุชููุฉ

1. ุฅุถุงูุฉ ุชูุงุฑูุฑ ูููุตูุฉ ููููุงุฏ ูุงูุฃุฏููุฉ
2. ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช ูุฎุตุตุฉ ููู ููุน
3. ุฅููุงููุฉ ุชุตุฏูุฑ ุงูุจูุงูุงุช ุญุณุจ ุงูููุน
4. ุฅุถุงูุฉ ุชูุจููุงุช ุฎุงุตุฉ ุจุงูุฃุฏููุฉ (ุชูุงุฑูุฎ ุงูุชูุงุก ุงูุตูุงุญูุฉ)
5. ุฑุจุท ุงูุฃุฏููุฉ ุจุฌุฏุงูู ุฅุนุทุงุก ุงูุฏูุงุก ูููุทุนุงู

## ุงูุฎูุงุตุฉ

ุชู ุชูููุฐ ุฌููุน ุงููุชุทูุจุงุช ุงููุทููุจุฉ ุจูุฌุงุญ:
โ ููุชุฑุฉ ุญุณุจ ููุน ุงููุฎุฒูู (ููุงุฏ/ุฃุฏููุฉ) ูู ุตูุญุฉ ุงูููุงุฏ
โ ุฅุถุงูุฉ ูุณู ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ ููุฃุฏููุฉ ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏ
โ ุฅููุงููุฉ ุฅุถุงูุฉ ุฃุฏููุฉ ูู ูุงูุฐุฉ ุฅุถุงูุฉ ูุงุฏุฉ ุฅูู ุงููุณุชูุฏุน
โ ุฏุนู ูุงูู ููุฃุฏููุฉ ูู ููุงุชูุฑ ุงูุดุฑุงุก (ููุฌูุฏ ูุณุจูุงู)