# ุฅุตูุงุญ ุนุฑุถ ุญูู "ุงูุนุฏุฏ ูุจู" ูู ุงููุงุฌูุฉ

## ๐ ุงููุดููุฉ

ุจุนุฏ ุชุทุจูู ุงูุชุญุฏูุซุงุช ูุญุณุงุจ "ุงูุนุฏุฏ ูุจู" ุชููุงุฆูุงูุ ูู ุชูู ุงููููุฉ ุชุธูุฑ ูู ุงูุญูู ุจุดูู ุตุญูุญ.

## ๐ ุงูุณุจุจ

ุนูุฏ ุงุณุชุฎุฏุงู `disabled` ูุน `register` ูู react-hook-formุ ูุฏ ูุง ุชูุญุฏุซ ุงููููุฉ ุจุดูู ุตุญูุญ ุนูุฏ ุงุณุชุฎุฏุงู `setValue` ุฏููุงููููุงู.

## โ ุงูุญู ุงููุทุจู

ุชู ุชูุณูู ุงูุญูู ุฅูู ูุณููู:

### 1. ุญูู ุงูุนุฑุถ (Display Field)
```tsx
<Input
  id="chicks_before_display"
  type="number"
  value={watchChicksBefore || 0}  // โ ูุนุฑุถ ุงููููุฉ ูุจุงุดุฑุฉ ูู watch
  readOnly                         // โ ูููุฑุงุกุฉ ููุท
  className="bg-muted cursor-not-allowed"
/>
```

**ุงูููุงุฆุฏ:**
- โ ูุนุฑุถ ุงููููุฉ ุจุดูู ููุฑู ูู `watch`
- โ ูุง ูุนุชูุฏ ุนูู register
- โ ููุญุฏุซ ุชููุงุฆูุงู ุนูุฏ ุชุบููุฑ ุงููููุฉ

### 2. ุญูู ูุฎูู (Hidden Field)
```tsx
<input 
  type="hidden" 
  {...register('chicks_before', { valueAsNumber: true })} 
/>
```

**ุงูููุงุฆุฏ:**
- โ ููุฑุณู ุงููููุฉ ูุน ุงููููุฐุฌ
- โ ูุชู ุชุญุฏูุซู ุนุจุฑ `setValue` ูู useEffect
- โ ูุง ูุชุฃุซุฑ ุจูุดุงูู ุงูุนุฑุถ

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ

### 1. ุชุญุณูู useEffect

**ูุจู:**
```typescript
useEffect(() => {
  const loadChicksBefore = async () => {
    const result = await getChicksBeforeForNewReport(warehouseId);
    if (result.success && result.data !== undefined) {
      setValue('chicks_before', result.data);
    }
  };
  loadChicksBefore();
}, [warehouseId, setValue]);
```

**ุจุนุฏ:**
```typescript
useEffect(() => {
  const loadChicksBefore = async () => {
    const result = await getChicksBeforeForNewReport(warehouseId);
    if (result.success && result.data !== undefined) {
      setValue('chicks_before', result.data, { 
        shouldValidate: true,   // โ ุชูุนูู ุงูุชุญูู
        shouldDirty: true,      // โ ูุถุน ุนูุงูุฉ dirty
        shouldTouch: true       // โ ูุถุน ุนูุงูุฉ touched
      });
    } else if (result.error) {
      console.error('Error loading chicks before:', result.error);
      toast.error('ูุดู ูู ุฌูุจ ุนุฏุฏ ุงูุฏุฌุงุฌ');
    }
  };
  loadChicksBefore();
}, [warehouseId, setValue]);
```

**ุงูููุงุฆุฏ:**
- โ `shouldValidate`: ููุดุบู ุงูุชุญูู ูู ุงูุตุญุฉ
- โ `shouldDirty`: ููุนูู ุงููููุฐุฌ ุฃู ููุงู ุชุบููุฑ
- โ `shouldTouch`: ููุนูู ุฃู ุงูุญูู ุชู ููุณู
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุน toast

---

### 2. ุชุญุฏูุซ ุญูู ุงูุนุฑุถ

**ูุจู:**
```tsx
<div className="space-y-2">
  <Label htmlFor="chicks_before">ุงูุนุฏุฏ ูุจู (ุชููุงุฆู)</Label>
  <Input
    id="chicks_before"
    type="number"
    {...register('chicks_before', { valueAsNumber: true })}
    disabled
    className="bg-muted"
  />
  <p className="text-xs text-muted-foreground">
    ููุญุณุจ ุชููุงุฆูุงู ูู ุงููุทูุน ุฃู ุงูุชูุฑูุฑ ุงูุณุงุจู
  </p>
</div>
```

**ุจุนุฏ:**
```tsx
<div className="space-y-2">
  <Label htmlFor="chicks_before_display">ุงูุนุฏุฏ ูุจู (ุชููุงุฆู)</Label>
  <Input
    id="chicks_before_display"
    type="number"
    value={watchChicksBefore || 0}
    readOnly
    className="bg-muted cursor-not-allowed"
  />
  {/* Hidden input to submit the value */}
  <input type="hidden" {...register('chicks_before', { valueAsNumber: true })} />
  <p className="text-xs text-muted-foreground">
    ููุญุณุจ ุชููุงุฆูุงู ูู ุงููุทูุน ุฃู ุงูุชูุฑูุฑ ุงูุณุงุจู
  </p>
</div>
```

**ุงูุชุบููุฑุงุช:**
- โ ุชุบููุฑ `id` ูู `chicks_before` ุฅูู `chicks_before_display`
- โ ุงุณุชุจุฏุงู `{...register}` ุจู `value={watchChicksBefore || 0}`
- โ ุงุณุชุจุฏุงู `disabled` ุจู `readOnly`
- โ ุฅุถุงูุฉ `cursor-not-allowed` ููุชูุถูุญ ุงูุจุตุฑู
- โ ุฅุถุงูุฉ ุญูู ูุฎูู ูุน `register` ูุฅุฑุณุงู ุงููููุฉ

---

## ๐ฏ ููู ูุนูู ุงูุขูุ

### ุฎุทูุฉ ุจุฎุทูุฉ:

```
1. ุชุญููู ุงูุตูุญุฉ
   โ
2. useEffect ูุณุชุฏุนู getChicksBeforeForNewReport(warehouseId)
   โ
3. ุงููุชูุฌุฉ ุชูุญูุธ ูู ุงููููุฐุฌ ุนุจุฑ setValue('chicks_before', value)
   โ
4. watch('chicks_before') ูุชุชุจุน ุงููููุฉ
   โ
5. watchChicksBefore ุชูุญุฏุซ ุชููุงุฆูุงู
   โ
6. ุญูู ุงูุนุฑุถ ูุนุฑุถ ุงููููุฉ: value={watchChicksBefore || 0}
   โ
7. ุนูุฏ ุงูุฅุฑุณุงู: ุงูุญูู ุงููุฎูู ููุฑุณู ุงููููุฉ ูุน ุงูุจูุงูุงุช
```

---

## ๐ ููุงุฑูุฉ

| ุงูุฌุงูุจ | ูุจู ุงูุฅุตูุงุญ | ุจุนุฏ ุงูุฅุตูุงุญ |
|--------|-------------|-------------|
| **ุนุฑุถ ุงููููุฉ** | โ ูุง ุชุธูุฑ | โ ุชุธูุฑ ููุฑุงู |
| **ุชุญุฏูุซ ุงููููุฉ** | โ ูุง ูุนูู ูุน disabled | โ ูุนูู ูุน watch |
| **ุฅุฑุณุงู ุงููููุฉ** | โ ููุฑุณู | โ ููุฑุณู (ุนุจุฑ hidden) |
| **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก** | โ ูุง ุชูุฌุฏ | โ toast + console |
| **ุงูุชุญูู ูู ุงูุตุญุฉ** | โ ูุนุทู | โ ููุนู |

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ 1: ุนุฑุถ ุงููููุฉ
```
โ ุงูุชุญ ุตูุญุฉ ุงูุชูุฑูุฑ ุงููููู
โ ุชุญูู ูู ุธููุฑ ูููุฉ "ุงูุนุฏุฏ ูุจู" ููุฑุงู
โ ุชุญูู ูู ุฃู ุงูุญูู ูููุฑุงุกุฉ ููุท (readOnly)
โ ุชุญูู ูู ุงูุฎูููุฉ ุงูุฑูุงุฏูุฉ (bg-muted)
```

### ุงุฎุชุจุงุฑ 2: ุงูุชูุฑูุฑ ุงูุฃูู
```
โ ูุฒุฑุนุฉ ุฌุฏูุฏุฉ ุจุฏูู ุชูุงุฑูุฑ
โ ุงููููุฉ ุงููุนุฑูุถุฉ = remaining_chicks ูู poultry_status
โ ูุซูุงู: 10,000
```

### ุงุฎุชุจุงุฑ 3: ุงูุชูุฑูุฑ ุงูุซุงูู
```
โ ูุฒุฑุนุฉ ููุง ุชูุฑูุฑ ูุงุญุฏ
โ ุงููููุฉ ุงููุนุฑูุถุฉ = chicks_after ูู ุขุฎุฑ ุชูุฑูุฑ
โ ูุซูุงู: 9,950 (ุฅุฐุง ูุงู ุงูุชูุฑูุฑ ุงูุณุงุจู)
```

### ุงุฎุชุจุงุฑ 4: ุงูุญูุธ
```
โ ุฃุฏุฎู ุงูุจูุงูุงุช ุงูุฃุฎุฑู
โ ุงุญูุธ ุงูุชูุฑูุฑ
โ ุชุญูู ูู ุฃู chicks_before ุชู ุญูุธู ุจุงููููุฉ ุงูุตุญูุญุฉ
```

### ุงุฎุชุจุงุฑ 5: ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
```
โ ุฅุฐุง ุญุฏุซ ุฎุทุฃ ูู ุฌูุจ ุงููููุฉ
โ ุชุญูู ูู ุธููุฑ toast ุฎุทุฃ
โ ุชุญูู ูู console.error
```

---

## ๐ก ููุงุญุธุงุช ูููุฉ

### 1. ุงุณุชุฎุฏุงู readOnly ุจุฏูุงู ูู disabled
```tsx
readOnly        // โ ูุณูุญ ุจุงูุนุฑุถ ูุงูุชุญุฏูุซ
disabled        // โ ูุฏ ูููุน ุงูุชุญุฏูุซ ูู ุจุนุถ ุงูุญุงูุงุช
```

### 2. ุงุณุชุฎุฏุงู watch ููุนุฑุถ
```tsx
value={watchChicksBefore || 0}  // โ ูุนุฑุถ ุงููููุฉ ุงูุญุงููุฉ ุฏุงุฆูุงู
{...register('chicks_before')}  // โ ูุฏ ูุง ููุญุฏุซ ูุน disabled
```

### 3. ุงูุญูู ุงููุฎูู
```tsx
<input type="hidden" {...register('chicks_before', { valueAsNumber: true })} />
```
- ุถุฑูุฑู ูุฅุฑุณุงู ุงููููุฉ ูุน ุงููููุฐุฌ
- ูุชู ุชุญุฏูุซู ุชููุงุฆูุงู ุนุจุฑ `setValue`
- ูุง ูุธูุฑ ูู ุงููุงุฌูุฉ

### 4. ุงูุชุญูู ูู ุงููููุฉ
```typescript
if (result.success && result.data !== undefined) {
  // ุชุญูู ูู undefined ูุฃู ุงููููุฉ ูุฏ ุชููู 0 (ููู ูููุฉ ุตุญูุญุฉ)
}
```

---

## โ ุงูุฎูุงุตุฉ

**ุงููุดููุฉ:** ุงููููุฉ ูุง ุชุธูุฑ ูู ุงูุญูู  
**ุงูุญู:** ุชูุณูู ุฅูู ุญูู ุนุฑุถ + ุญูู ูุฎูู  
**ุงููุชูุฌุฉ:** โ ุงููููุฉ ุชุธูุฑ ุจุดูู ุตุญูุญ ูุชูุญูุธ ุจูุฌุงุญ

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ:** 2025-10-05  
**ุงูุญุงูุฉ:** โ ุชู ุงูุฅุตูุงุญ ูุฌุงูุฒ ููุงุฎุชุจุงุฑ
