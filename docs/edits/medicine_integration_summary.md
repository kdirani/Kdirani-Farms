# ููุฎุต ุชูุงูู ุงูุฃุฏููุฉ ูุน ุงูููุงุชูุฑ

## โ ุงูุชุญุฏูุซุงุช ุงูููุฌุฒุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช
ุชู ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ ุนุจุฑ ุงูุณูุฑูุจุชุงุช SQL ุงูููุฌูุฏุฉ ูู:
- `d:\Client Projects\Al-Qadeerani Company\newapptest\new\docs\edits\safe_migration.sql`

**ุงูุชุบููุฑุงุช:**
- โ ุฅุถุงูุฉ ุนููุฏ `medicine_id` ุฅูู ุฌุฏูู `invoice_items`
- โ ุฅุถุงูุฉ ุนููุฏ `medicine_id` ุฅูู ุฌุฏูู `materials`
- โ ุฅุถุงูุฉ ููุฏ `check_material_or_medicine` ููุชุฃูุฏ ูู ูุฌูุฏ ุฅูุง ูุงุฏุฉ ุฃู ุฏูุงุก
- โ ุชุญุฏูุซ ุงูููุงุฑุณ ุงููุฑูุฏุฉ ูุฏุนู ูู ูู ุงูููุงุฏ ูุงูุฃุฏููุฉ

---

### 2. ุฃููุงุน TypeScript
**ุงูููู:** `types/database.types.ts`

**ุงูุชุญุฏูุซุงุช:**
- โ ุฅุถุงูุฉ `medicine_id: string | null` ุฅูู `invoice_items.Row`
- โ ุฅุถุงูุฉ `medicine_id: string | null` ุฅูู `invoice_items.Insert`
- โ ุฅุถุงูุฉ `medicine_id: string | null` ุฅูู `invoice_items.Update`
- โ ุฅุถุงูุฉ `medicine_id: string | null` ุฅูู `materials.Row`
- โ ุฅุถุงูุฉ `medicine_id: string | null` ุฅูู `materials.Insert`
- โ ุฅุถุงูุฉ `medicine_id: string | null` ุฅูู `materials.Update`

---

### 3. ุฅุฌุฑุงุกุงุช Server Actions
**ุงูููู:** `actions/invoice-item.actions.ts`

**ุงูุชุญุฏูุซุงุช:**
- โ ุฅุถุงูุฉ `medicine_id` ู `medicine_name` ู `medicine_day_of_age` ุฅูู ููุน `InvoiceItem`
- โ ุฅุถุงูุฉ `medicine_id` ุฅูู ููุน `CreateInvoiceItemInput`
- โ ุชุญุฏูุซ ุฏุงูุฉ `getInvoiceItems` ูุฌูุจ ูุนูููุงุช ุงูุฃุฏููุฉ ูู ุฌุฏูู `medicines`
- โ ุฏุนู ุนุฑุถ ุงุณู ุงูุฏูุงุก ูููู ุงูุฅุนุทุงุก ูู ุชูุงุตูู ุงูุนูุตุฑ

---

### 4. ูุงุฌูุฉ ุฅูุดุงุก ุงููุงุชูุฑุฉ
**ุงูููู:** `components/admin/invoices/create-invoice-dialog.tsx`

**ุงูุชุญุฏูุซุงุช:**
- โ ุฅุถุงูุฉ ุงุณุชูุฑุงุฏ `getMedicines` ูู `@/actions/medicine.actions`
- โ ุฅุถุงูุฉ ุงุณุชูุฑุงุฏ `Tabs, TabsContent, TabsList, TabsTrigger` ูู ููุชุจุฉ UI
- โ ุฅุถุงูุฉ ุฃููููุฉ `Pill` ููุฃุฏููุฉ
- โ ุฅุถุงูุฉ `medicine_id` ุฅูู ููุน `InvoiceItemInput`
- โ ุฅุถุงูุฉ state ูู `medicines` ู `itemType`
- โ ุชุญุฏูุซ `loadData()` ูุฌูุจ ุงูุฃุฏููุฉ
- โ ุฅุถุงูุฉ Tabs ููุชุจุฏูู ุจูู ุงูููุงุฏ ูุงูุฃุฏููุฉ
- โ ุชุญุฏูุซ `handleAddItem()` ููุชุญูู ูู ุงูุฃุฏููุฉ ุฃูุถุงู
- โ ุชุญุฏูุซ ุนุฑุถ ุงูุจููุฏ ุงููุถุงูุฉ ูุฅุธูุงุฑ ุงูุฃุฏููุฉ ูุน ุฃููููุฉ Pill

**ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:**
- ุชุจููุจุงุช (Tabs) ููุชุจุฏูู ุจูู ุฅุถุงูุฉ ููุงุฏ ุฃู ุฃุฏููุฉ
- ุนุฑุถ ุงุณู ุงูุฏูุงุก ูุน ููู ุงูุฅุนุทุงุก ุนูุฏ ุงูุงุฎุชูุงุฑ
- ุฃููููุฉ ุฏูุงุก (๐) ุจุฌุงูุจ ุงูุฃุฏููุฉ ูู ูุงุฆูุฉ ุงูุจููุฏ
- ููุน ุฅุถุงูุฉ ุนูุตุฑ ุจุฏูู ุชุญุฏูุฏ ูุงุฏุฉ ุฃู ุฏูุงุก

---

### 5. ูุงุฌูุฉ ุนุฑุถ ุชูุงุตูู ุงููุงุชูุฑุฉ
**ุงูููู:** `components/admin/invoices/invoice-items-section.tsx`

**ุงูุชุญุฏูุซุงุช:**
- โ ุฅุถุงูุฉ ุฃููููุฉ `Pill` ููุฃุฏููุฉ
- โ ุชุญุฏูุซ ุฑุฃุณ ุงูุฌุฏูู ูู "ุงููุงุฏุฉ/ุงูููุชุฌ" ุฅูู "ุงููุงุฏุฉ/ุงูุฏูุงุก/ุงูููุชุฌ"
- โ ุชุญุฏูุซ ุนููุฏ "ูุฒู ุงูุจูุถ" ุฅูู "ุชูุงุตูู ุฅุถุงููุฉ" ูุนุฑุถ ููู ุงูุฅุนุทุงุก ููุฃุฏููุฉ
- โ ุนุฑุถ ุฃููููุฉ ุฏูุงุก ุจุฌุงูุจ ุงูุฃุฏููุฉ ูู ุงูุฌุฏูู
- โ ุนุฑุถ ููู ุฅุนุทุงุก ุงูุฏูุงุก ูู ุนููุฏ ุงูุชูุงุตูู

**ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:**
- ุฃููููุฉ ูููุฒุฉ ููุฃุฏููุฉ ูู ุฌุฏูู ุงูุนูุงุตุฑ
- ุนุฑุถ ูุนูููุงุช ุงูุฏูุงุก (ุงูููู) ุจุฌุงูุจ ุงูุงุณู
- ุฏุนู ูุงูู ูุนุฑุถ ูู ูู ุงูููุงุฏ ูุงูุฃุฏููุฉ ูู ููุณ ุงููุงุชูุฑุฉ

---

## ๐ฏ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุฅุถุงูุฉ ุฏูุงุก ุฅูู ูุงุชูุฑุฉ:

1. **ุงูุชุญ ุตูุญุฉ ุงูููุงุชูุฑ**: `/admin/invoices`
2. **ุงููุฑ ุนูู "ุฅูุดุงุก ูุงุชูุฑุฉ ุฌุฏูุฏุฉ"**
3. **ูู ูุณู "ุจููุฏ ุงููุงุชูุฑุฉ":**
   - ุงููุฑ ุนูู ุชุจููุจ "ุฃุฏููุฉ" ๐
   - ุงุฎุชุฑ ุงูุฏูุงุก ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
   - ุณูุธูุฑ ุงุณู ุงูุฏูุงุก ูุน ููู ุงูุฅุนุทุงุก ูู ุงููุงุฆูุฉ
4. **ุฃุฏุฎู ุงููููุฉ ูุงููุญุฏุฉ ูุงูุณุนุฑ**
5. **ุงููุฑ ุนูู ุฒุฑ "+" ูุฅุถุงูุฉ ุงูุฏูุงุก**
6. **ุณูุธูุฑ ุงูุฏูุงุก ูู ูุงุฆูุฉ ุงูุจููุฏ ูุน ุฃููููุฉ ๐**

---

## ๐งช ุงุฎุชุจุงุฑุงุช ููุชุฑุญุฉ

### ุงุฎุชุจุงุฑ 1: ุฅุถุงูุฉ ูุงุชูุฑุฉ ุจุฃุฏููุฉ ููุท
1. ุฃูุดุฆ ูุงุชูุฑุฉ ุดุฑุงุก ุฌุฏูุฏุฉ
2. ุฃุถู ุนุฏุฉ ุฃุฏููุฉ ุจูููุงุช ูุฃุณุนุงุฑ ูุฎุชููุฉ
3. ุงุญูุธ ุงููุงุชูุฑุฉ
4. ุชุญูู ูู ุธููุฑ ุงูุฃุฏููุฉ ูู ุตูุญุฉ ุงูุชูุงุตูู

### ุงุฎุชุจุงุฑ 2: ุฅุถุงูุฉ ูุงุชูุฑุฉ ุจููุงุฏ ูุฃุฏููุฉ ูุนุงู
1. ุฃูุดุฆ ูุงุชูุฑุฉ ุดุฑุงุก ุฌุฏูุฏุฉ
2. ุฃุถู ููุงุฏ ูู ุชุจููุจ "ููุงุฏ"
3. ุฃุถู ุฃุฏููุฉ ูู ุชุจููุจ "ุฃุฏููุฉ"
4. ุงุญูุธ ุงููุงุชูุฑุฉ
5. ุชุญูู ูู ุธููุฑ ุฌููุน ุงูุนูุงุตุฑ ุจุดูู ุตุญูุญ

### ุงุฎุชุจุงุฑ 3: ุงูุชุญูู ูู ุงููุฎุฒูู
1. ุจุนุฏ ุฅุถุงูุฉ ูุงุชูุฑุฉ ุดุฑุงุก ุจุฃุฏููุฉ
2. ุงูุชุญ ุตูุญุฉ ุงูููุงุฏ `/admin/materials`
3. ุชุญูู ูู ุฅุถุงูุฉ ุงูุฃุฏููุฉ ุฅูู ุงููุฎุฒูู ุชููุงุฆูุงู

### ุงุฎุชุจุงุฑ 4: ูุงุชูุฑุฉ ุจูุน ููุฃุฏููุฉ
1. ุฃูุดุฆ ูุงุชูุฑุฉ ุจูุน
2. ุญุงูู ุฅุถุงูุฉ ุฃุฏููุฉ ูุชููุฑุฉ ูู ุงููุฎุฒูู
3. ุชุญูู ูู ุฎุตู ุงููููุงุช ูู ุงููุฎุฒูู

---

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ

```
โ types/database.types.ts
โ actions/invoice-item.actions.ts
โ components/admin/invoices/create-invoice-dialog.tsx
โ components/admin/invoices/invoice-items-section.tsx
โ docs/edits/safe_migration.sql (ุณูุฑูุจุช ูุงุนุฏุฉ ุงูุจูุงูุงุช)
โ docs/edits/ุชุนูููุงุช_ุงูุชูููุฐ.md (ุชุนูููุงุช ุงูุชุทุจูู)
```

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)

### ุชุญุณููุงุช ูุณุชูุจููุฉ:
1. **ุชูุงุฑูุฑ ุงูุฃุฏููุฉ**: ุฅุถุงูุฉ ุชูุงุฑูุฑ ุฎุงุตุฉ ุจุงุณุชููุงู ุงูุฃุฏููุฉ
2. **ุชูุจููุงุช ุงููุฎุฒูู**: ุชูุจูู ุนูุฏ ุงูุฎูุงุถ ูุฎุฒูู ุฏูุงุก ูุนูู
3. **ุฌุฏูู ุงูุฃุฏููุฉ**: ุฑุจุท ุงูุฃุฏููุฉ ุจุฌุฏูู ุฒููู ููุฏูุงุฌู
4. **ุชุงุฑูุฎ ุงูุตูุงุญูุฉ**: ุฅุถุงูุฉ ุชุชุจุน ุชุงุฑูุฎ ุตูุงุญูุฉ ุงูุฃุฏููุฉ
5. **ุงูุฌุฑุนุงุช**: ุฅุถุงูุฉ ุญููู ููุฌุฑุนุงุช ุงูููุตู ุจูุง

---

## ๐ ุญู ุงููุดุงูู

### ุงููุดููุฉ: ูุง ุชุธูุฑ ุงูุฃุฏููุฉ ูู ุงููุงุฆูุฉ
**ุงูุญู:** ุชุฃูุฏ ูู ูุฌูุฏ ุฃุฏููุฉ ูู ุฌุฏูู `medicines` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงููุดููุฉ: ุฎุทุฃ ุนูุฏ ุญูุธ ุงููุงุชูุฑุฉ
**ุงูุญู:** 
1. ุงูุชุญ Developer Tools ูู ุงููุชุตูุญ (F12)
2. ุงูุญุต ุฑุณุงูุฉ ุงูุฎุทุฃ ูู Console
3. ุชุญูู ูู ุฃู ุฌููุน ุงูุญููู ุงููุทููุจุฉ ูุนุจุฃุฉ

### ุงููุดููุฉ: ูุง ูุชู ุชุญุฏูุซ ุงููุฎุฒูู
**ุงูุญู:** ุชุญูู ูู ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูู triggers

---

## โจ ุงูุฎูุงุตุฉ

ุชู ุชูููุฐ ุงูุชูุงูู ุงููุงูู ููุฃุฏููุฉ ูุน ูุธุงู ุงูููุงุชูุฑ ุจูุฌุงุญ! 

ุงูุขู ููููู:
- โ ุฅุถุงูุฉ ุฃุฏููุฉ ุฅูู ููุงุชูุฑ ุงูุดุฑุงุก
- โ ุจูุน ุฃุฏููุฉ ูู ุงููุฎุฒูู
- โ ุชุชุจุน ุญุฑูุฉ ุงูุฃุฏููุฉ
- โ ุนุฑุถ ุชูุงุตูู ุงูุฃุฏููุฉ ูู ุงูููุงุชูุฑ
- โ ุงูุชุจุฏูู ุจุณูููุฉ ุจูู ุงูููุงุฏ ูุงูุฃุฏููุฉ

**ุชุงุฑูุฎ ุงูุฅูุฌุงุฒ:** 2025-10-04  
**ุงูุญุงูุฉ:** โ ููุชูู
